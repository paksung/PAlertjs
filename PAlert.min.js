class PAlert{constructor(options){if(arguments.length>0&&(typeof options).toLowerCase()!=='object'){throw new TypeError(options+'is not a Object');}this.options=Object.assign({'type':'info','title':'通知','content':'这是一个提示框，请在此输入你所需要的提示信息。','backdrop':false,'animate':true,'autoClose':0},options)}show(){if(document.querySelector('#modal_mask')){document.body.removeChild(document.querySelector('#modal_mask'))}let _self=this;_createMask();_createMD();if(this.options.backdrop){this._mask.onclick=(e)=>{this.hide()}}if(this.options.autoClose>0){let count=Math.ceil(this.options.autoClose/1000),cbtn=document.getElementById('PMClose'),cval=cbtn.innerHTML;let autoTimer=setInterval(()=>{count-=1;cbtn.innerHTML=cval+' ('+count+')';if(count<=0){this.hide()}},1000)}this.setCancel('关 闭',(e)=>{this.hide();e.target.disabled='disabled'}).setConfirm('',(e)=>{e.target.disabled='disabled'});document.getElementById('PMConfirm').style.display='none';function _createMask(){_self._mask=document.createElement('div');_self._mask.id='modal_mask';_self.options.animate?addClass(_self._mask,'fadeIn'):null;document.body.appendChild(_self._mask);if(needHide()){addClass(document.body,'hide_scroll')}}function _createMD(){let tip='',dialogStr='',color='',dialogBg=document.createElement('div');dialogBg.className='dialog_bg';_self.options.animate?addClass(dialogBg,'mdScaleIn'):null;switch(_self.options.type){case'success':tip='✔';color='success';break;case'error':tip='✖';color='error';break;case'warning':tip='!';color='warning';break;case'info':tip='!';color='info';break;case'question':tip='?';color='question';break;default:break}dialogStr='<div class="tip_icon"><i class="'+color+'">'+tip+'</i></div><div class="content"><h3></h3><p></p><div class="Pbtns"><button id="PMConfirm">确 定</button><button id="PMClose">关 闭</button></div></div>';dialogBg.innerHTML=dialogStr;dialogBg.onclick=(e)=>{e.stopPropagation?e.stopPropagation():e.cancelBubble=true};_self._mask.appendChild(dialogBg);document.querySelector('.content>h3').innerText=_self.options.title;document.querySelector('.content>p').innerText=_self.options.content}return this}hide(){if(this.options.animate){addClass(this._mask,'fadeOut');this._mask.addEventListener('animationend',(e)=>{removeClass(document.body,'hide_scroll');document.getElementById('modal_mask')?document.body.removeChild(this._mask):null},false)}else{removeClass(document.body,'hide_scroll');this._mask?document.body.removeChild(this._mask):null}return this}setConfirm(val,cb){let btn=document.getElementById('PMConfirm');btn.style.display='block';if(val){btn.innerHTML=val}if((typeof cb).toLowerCase()==='function'){btn.addEventListener('click',cb)}else{throw new TypeError(cb+'is not a function!');}return this}setCancel(val,cb){let btn=document.getElementById('PMClose');if(val){btn.innerHTML=val}if((typeof cb).toLowerCase()==='function'){btn.addEventListener('click',cb)}else{throw new TypeError(options+'is not a function!');}return this}}function addClass(ele,cls){let reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");ele.className.match(reg)?null:ele.className+=' '+cls}function removeClass(ele,cls){let reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");if(ele.className.match(reg)){ele.className=ele.className.replace(reg,' ')}}function needHide(){let isMobile=navigator.userAgent.indexOf('Mobile')>-1;if(isMobile){return false}else{return window.innerHeight<document.body.scrollHeight}}window.onresize=function(e){if(document.querySelector('#modal_mask')&&needHide()){addClass(document.body,'hide_scroll')}else{removeClass(document.body,'hide_scroll')}}